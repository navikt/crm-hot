<template>

	<div class="brodsmulesti">
		<lightning-breadcrumbs class="skjema-max-width">
			<lightning-breadcrumb label="Tolketjenesten" href="/s/" onclick={goToHome}>
			</lightning-breadcrumb>
			<lightning-breadcrumb label="Ny bestilling" href="/s/ny-bestilling" onclick={goToNewRequest}>
			</lightning-breadcrumb>
		</lightning-breadcrumbs>
	</div>

	<div if:false={edit} class="main-content submitted-false create-form">
		<div class="skjema-ikon tolketjenesten">
			<img if:false={isProd} class="skjema-ikon-img" src="/sfsites/c/resource/1585817547000/SkjemaIkon"></img>
			<img if:true={isProd} class="skjema-ikon-img" src="/s/sfsites/c/resource/1585817547000/SkjemaIkon"></img>
		</div>
		<div class="skjema skjema-max-width">

			<div if:false={defaultForm} class="valg-av-bestillingstype__container">
				<lightning-record-edit-form object-api-name="HOT_Request__c" density="comfy"
					onsubmit={handleRequestTypeSubmit} onerror={handleError}>
					<lightning-radio-group style="margin-bottom: 1rem;" name="radioGroup"
						label="Hva slags bestilling ønsker du å legge inn?" options={requestTypes} type="radio"
						onchange={handleRequestTypeChange} required>
					</lightning-radio-group>

					<lightning-messages aria-live="assertive">
					</lightning-messages>
					<lightning-button onclick={validateFields} variant="brand" type="submit" label="Neste">
					</lightning-button>
				</lightning-record-edit-form>
			</div>


			<div if:true={userForm} class="bruker-info-skjema">
				<lightning-record-edit-form object-api-name="HOT_Request__c" density="comfy"
					onsubmit={handleUserFormSubmit} onerror={handleError}>
					<h2 style="font-size: 1.25rem;">Informasjon om bruker</h2>
					<lightning-input-field class="tolk-skjema-input" field-name="UserName__c" required>
					</lightning-input-field>
					<lightning-input-field class="tolk-skjema-input" field-name="PersonNumber__c" required>
					</lightning-input-field>

					<lightning-messages aria-live="assertive">
					</lightning-messages>
					<lightning-button variant="brand" type="submit" label="Neste">
					</lightning-button>
				</lightning-record-edit-form>
			</div>

			<div if:true={companyForm} class="virksomhet-info-skjema">
				<lightning-record-edit-form object-api-name="HOT_Request__c" density="comfy"
					onsubmit={handleCompanyFormSubmit} onerror={handleError}>
					<h2 style="font-size: 1.25rem;">Informasjon om virksomhet</h2>
					<lightning-input-field class="tolk-skjema-input" field-name="OrganizationNumber__c" required>
					</lightning-input-field>
					<lightning-input-field class="tolk-skjema-input" field-name="InvoiceReference__c">
					</lightning-input-field>
					<lightning-input-field class="tolk-skjema-input" field-name="AdditionalInvoiceText__c">
					</lightning-input-field>
					<lightning-input-field class="tolk-skjema-input" field-name="OrderNumber__c">
					</lightning-input-field>

					<lightning-messages aria-live="assertive">
					</lightning-messages>
					<lightning-button variant="brand" type="submit" label="Neste"></lightning-button>
				</lightning-record-edit-form>
			</div>


			<div if:true={requestForm} class="bestilling-info-skjema">

				<lightning-record-edit-form object-api-name="HOT_Request__c" density="comfy" onsuccess={handleSuccess}
					onerror={handleError} onsubmit={handleSubmit}>
					<h2 style="font-size: 1.25rem;">Informasjon om behov for tolk</h2>
					<lightning-input-field class="tolk-skjema-input" field-name="Subject__c"
						value={fieldValues.Subject__c} title="Hva trenger du tolk til?" required>
					</lightning-input-field>
					</br>
					<lightning-input-field class="tolk-skjema-input start-tid" field-name="StartTime__c"
						date-style="short" onchange={handleChange} value={startTime} required>
					</lightning-input-field>
					<lightning-input-field class="tolk-skjema-input slutt-tid" field-name="EndTime__c"
						date-style="short" value={endTime} onchange={setEndTime} required>
					</lightning-input-field>
					</br>
					<lightning-input-field class="tolk-skjema-input adressefelt-hjelp" field-name="MeetingStreet__c"
						value={fieldValues.MeetingStreet__c} required>
					</lightning-input-field>
					<div class="slds-grid slds-gutters">
						<div class="slds-col slds-size_2-of-5">
							<lightning-input-field class="tolk-skjema-input postnummer" title="Postnummer"
								field-name="MeetingPostalCode__c" value={fieldValues.MeetingPostalCode__c}>
							</lightning-input-field>
						</div>
						<div class="slds-col slds-size_3-of-5">
							<lightning-input-field class="tolk-skjema-input" title="Poststed"
								field-name="MeetingPostalCity__c" value={fieldValues.MeetingPostalCity__c}>
							</lightning-input-field>
						</div>
					</div>
					</br>


					<lightning-radio-group class="nav-radio-button-group" name="radioGroup"
						label="Er oppmøteadresse det samme som tolkeadresse?" options={options} value={value}
						type="radio" onchange={toggled}></lightning-radio-group>



					<div if:false={sameLocation}>
						<lightning-input-field class="tolk-skjema-input adressefelt-hjelp" title="Tolkeaddresse"
							field-name="InterpretationStreet__c" value={fieldValues.InterpretationStreet__c}>
						</lightning-input-field>
						<div class="slds-grid slds-gutters">
							<div class="slds-col slds-size_2-of-5">
								<lightning-input-field class="tolk-skjema-input postnummer" title="Postnummer"
									field-name="InterpretationPostalCode__c"
									value={fieldValues.InterpretationPostalCode__c}>
								</lightning-input-field>
							</div>
							<div class="slds-col slds-size_3-of-5">
								<lightning-input-field class="tolk-skjema-input" title="Poststed"
									field-name="InterpretationPostalCity__c"
									value={fieldValues.InterpretationPostalCity__c}>
								</lightning-input-field>
							</div>
						</div>
					</div>
					</br>
					<lightning-input-field class="tolk-skjema-input ikke-sensitiv-fritekst" title="Tilleggsopplysninger"
						field-name="Description__c" value={fieldValues.Description__c}>
					</lightning-input-field>

					<lightning-messages aria-live="assertive">
					</lightning-messages>

					<div class="button-container">
						<div if:true={spin} class="loader"></div>
						<div if:false={spin}>
							<lightning-button title="Send inn bestilling" class="slds-m-left_x-small" type="submit"
								variant="brand" label="SEND INN" onclick={handleSubmit}>
							</lightning-button>
							</br>
							<lightning-button title="Avbryt" variant="base" label="Avbryt" onclick={goToPrevousPage}
								class="slds-m-left_x-small back-button">
							</lightning-button>
						</div>
					</div>
				</lightning-record-edit-form>
			</div>
		</div>
	</div>

	<div class="main-content hidden submitted-true ">
		<div class="main-content dialog-boks skjema-max-width">
			<lightning-icon icon-name="utility:success" alternative-text="Suksess" title="Suksess" variant="success"
				size="large">
			</lightning-icon>
			</br>
			<h2 class="typo-undertittel h2-successMessage" id="successMessage" tabindex="-1">Bestillingen er sendt
			</h2>

			<lightning-file-upload if:false={hide} label="Legg til filer" name="fileUploader" accept={acceptedFormat}
				record-id={recordId} onuploadfinished={handleUploadFinished} multiple>
			</lightning-file-upload>
			</br>
			<lightning-button title="Gå til mine bestillinger" variant="brand" label="OK" onclick={goToMyRequests}>
			</lightning-button>
		</div>
	</div>

	<div if:true={edit} class="main-content submitted-false">
		<div class="skjema-ikon tolketjenesten">
			<img if:false={isProd} class="skjema-ikon-img" src="/sfsites/c/resource/1585817547000/SkjemaIkon"></img>
			<img if:true={isProd} class="skjema-ikon-img" src="/s/sfsites/c/resource/1585817547000/SkjemaIkon"></img>
		</div>
		<div class="skjema skjema-max-width">
			<lightning-record-edit-form object-api-name="HOT_Request__c" record-id={recordId} density="comfy"
				onsuccess={handleSuccess} onerror={handleError} onsubmit={handleSubmit}>
				<lightning-input-field class="tolk-skjema-input" field-name="Subject__c" value={fieldValues.Subject__c}
					title="Hva trenger du tolk til?" required>
				</lightning-input-field>
				</br>
				<lightning-input-field class="tolk-skjema-input start-tid" field-name="StartTime__c" date-style="short"
					onchange={handleChange} value={fieldValues.StartTime__c} required>
				</lightning-input-field>
				<lightning-input-field class="tolk-skjema-input slutt-tid" field-name="EndTime__c" date-style="short"
					value={fieldValues.EndTime__c} onchange={setEndTime} required>
				</lightning-input-field>
				</br>
				<lightning-input-field class="tolk-skjema-input adressefelt-hjelp" field-name="MeetingStreet__c"
					value={fieldValues.MeetingStreet__c} required>
				</lightning-input-field>
				<div class="slds-grid slds-gutters">
					<div class="slds-col slds-size_2-of-5">
						<lightning-input-field class="tolk-skjema-input postnummer" title="Postnummer"
							field-name="MeetingPostalCode__c" value={fieldValues.MeetingPostalCode__c}>
						</lightning-input-field>
					</div>
					<div class="slds-col slds-size_3-of-5">
						<lightning-input-field class="tolk-skjema-input" title="Poststed"
							field-name="MeetingPostalCity__c" value={fieldValues.MeetingPostalCity__c}>
						</lightning-input-field>
					</div>
				</div>
				</br>


				<lightning-radio-group class="nav-radio-button-group" name="radioGroup"
					label="Er oppmøteadresse det samme som tolkeadresse?" options={options} value={value} type="radio"
					onchange={toggled}></lightning-radio-group>



				<div if:false={sameLocation}>
					<lightning-input-field class="tolk-skjema-input adressefelt-hjelp" title="Tolkeaddresse"
						field-name="InterpretationStreet__c" value={fieldValues.InterpretationStreet__c}>
					</lightning-input-field>
					<div class="slds-grid slds-gutters">
						<div class="slds-col slds-size_2-of-5">
							<lightning-input-field class="tolk-skjema-input postnummer" title="Postnummer"
								field-name="InterpretationPostalCode__c"
								value={fieldValues.InterpretationPostalCode__c}>
							</lightning-input-field>
						</div>
						<div class="slds-col slds-size_3-of-5">
							<lightning-input-field class="tolk-skjema-input" title="Poststed"
								field-name="InterpretationPostalCity__c"
								value={fieldValues.InterpretationPostalCity__c}>
							</lightning-input-field>
						</div>
					</div>
				</div>
				</br>
				<lightning-input-field class="tolk-skjema-input ikke-sensitiv-fritekst" title="Tilleggsopplysninger"
					field-name="Description__c" value={fieldValues.Description__c}>
				</lightning-input-field>

				<lightning-file-upload if:false={hide} label="Legg til filer" name="fileUploader"
					accept={acceptedFormat} record-id={recordId} onuploadfinished={handleUploadFinished} multiple>
				</lightning-file-upload>

				<lightning-messages aria-live="assertive">
				</lightning-messages>
				<div class="button-container">
					<lightning-button title="Send inn bestilling" class="slds-m-left_x-small" type="submit"
						variant="brand" label="SEND INN" onclick={handleSubmit}>
					</lightning-button>
					</br>
					<lightning-button title="Avbryt" variant="base" label="Avbryt" onclick={goToPrevousPage}
						class="slds-m-left_x-small back-button">
					</lightning-button>
				</div>
			</lightning-record-edit-form>
		</div>
	</div>

</template>