<template>
    <div class="brodsmulesti">
        <lightning-breadcrumbs class="liste-max-width">
            <lightning-breadcrumb
                label="Tolketjenesten"
                href="/s/"
                onclick={goToHome}
            >
            </lightning-breadcrumb>
            <lightning-breadcrumb
                label="Mine bestillinger"
                href="/s/mine-bestillinger"
                onclick={goToMyRequests}
            >
            </lightning-breadcrumb>
        </lightning-breadcrumbs>
    </div>

    <div class="liste liste-max-width">
        <div class="right-content">
            <lightning-button
                title="Ny bestilling"
                class="right-button"
                variant="brand"
                label="Ny bestilling"
                onclick={goToNewRequest}
            >
            </lightning-button>
            <lightning-input
                type="checkbox"
                class="filter-list-checkbox"
                label="Vis også fullførte, avlyste og udekte bestillinger"
                name="ShowAll"
                onchange={handleChecked}
            >
            </lightning-input>
            <br />

            <lightning-combobox
                class="mobile-only"
                name="mobileSorting"
                label="Sorter etter"
                value={mobileSortingDefaultValue}
                options={sortingOptions}
                onchange={handleMobileSorting}
            >
            </lightning-combobox>

            <lightning-radio-group
                class="horizontal"
                name="radioGroup"
                options={requestTypes}
                value="my"
                type="radio"
                onchange={handleRequestType}
            ></lightning-radio-group>
        </div>
        <p style="align-self: flex-start" class="typo-normal">
            * For serieoppdrag vises start- og sluttid for den første
            forekomsten. For å se alle tidene under en bestilling, inkludert
            status og tildelt tolk, kan du velge Se tider i menyen til høyre på
            raden.
        </p>
        <br />
        <lightning-datatable
            key-field="Id"
            data={requests}
            columns={columns}
            hide-checkbox-column="true"
            default-sort-direction={defaultSortDirection}
            sorted-direction={sortDirection}
            sorted-by={sortedBy}
            onsort={onHandleSort}
            onrowaction={handleRowAction}
        >
        </lightning-datatable>
    </div>

    <div
        if:true={isDetails}
        class="ReactModal__Overlay ReactModal__Overlay--after-open modal__overlay"
        style="z-index: 9999; background-color: rgba(50, 65, 79, 0.8)"
    >
        <div
            class="ReactModal__Content ReactModal__Content--after-open navno-dekorator comments-dialog-container"
            tabindex="-1"
            role="dialog"
        >
            <div class="skjema skjema-max-width">
                <section if:true={userForm} class="bruker-info-skjema sub-form">
                    <h2 style="font-size: 1.25rem">Informasjon om bruker</h2>
                    <div class="slds-grid slds-gutters">
                        <div class="slds-col slds-size_1-of-2">
                            <span
                                class="slds-form-element__label lightning-output-field__label"
                                >Brukers navn</span
                            >
                            <br />
                            <lightning-formatted-text
                                value={record.ActualUserName__c}
                                class="lightning-output-field"
                            >
                            </lightning-formatted-text>
                        </div>
                    </div>
                </section>

                <section class="bestiller-info-skjema sub-form">
                    <h2 style="font-size: 1.25rem">Informasjon om bestiller</h2>
                    <div class="slds-grid slds-gutters">
                        <div class="slds-col slds-size_1-of-2">
                            <span
                                class="slds-form-element__label lightning-output-field__label"
                                >Bestillers navn</span
                            >
                            <br />
                            <lightning-formatted-text
                                value={record.Orderer__r.Name}
                                class="lightning-output-field"
                            >
                            </lightning-formatted-text>
                        </div>
                        <div
                            if:true={myRequest}
                            class="slds-col slds-size_1-of-2"
                        >
                            <span
                                class="slds-form-element__label lightning-output-field__label"
                                >Bestillers mobil</span
                            >
                            <br />
                            <lightning-formatted-text
                                value={record.OrdererPhone__c}
                                class="lightning-output-field"
                            >
                            </lightning-formatted-text>
                            <br />
                            <span
                                class="slds-form-element__label lightning-output-field__label"
                                >Bestillers e-post</span
                            >
                            <br />
                            <lightning-formatted-text
                                value={record.OrdererEmail__c}
                                class="lightning-output-field"
                            >
                            </lightning-formatted-text>
                        </div>
                    </div>
                </section>

                <section
                    if:true={companyForm}
                    class="virksomhet-info-skjema sub-form"
                >
                    <h2 style="font-size: 1.25rem">
                        Informasjon om virksomhet
                    </h2>
                    <div class="slds-grid slds-gutters">
                        <div class="slds-col slds-size_1-of-2">
                            <span
                                class="slds-form-element__label lightning-output-field__label"
                                >Organisasjonsnummer</span
                            >
                            <br />
                            <lightning-formatted-text
                                value={record.OrganizationNumber__c}
                                class="lightning-output-field"
                            >
                            </lightning-formatted-text>
                            <span
                                class="slds-form-element__label lightning-output-field__label"
                                >Deres fakturareferanse</span
                            >
                            <br />
                            <lightning-formatted-text
                                value={record.InvoiceReference__c}
                                class="lightning-output-field"
                            >
                            </lightning-formatted-text>
                        </div>
                        <div class="slds-col slds-size_1-of-2">
                            <span
                                class="slds-form-element__label lightning-output-field__label"
                                >Tilleggsinformajon</span
                            >
                            <br />
                            <lightning-formatted-text
                                value={record.AdditionalInvoiceText__c}
                                class="lightning-output-field"
                            >
                            </lightning-formatted-text>
                        </div>
                    </div>
                </section>

                <section class="bestilling-info-skjema sub-form">
                    <h2 style="font-size: 1.25rem">
                        Informasjon om tolkebehov
                    </h2>
                    <div class="slds-grid slds-gutters">
                        <div class="slds-col slds-size_1-of-2">
                            <div if:true={publicEvent}>
                                <span
                                    class="slds-form-element__label lightning-output-field__label"
                                    >Type arrangement</span
                                >
                                <br />
                                <lightning-formatted-text
                                    value={record.EventType__c}
                                    class="lightning-output-field"
                                >
                                </lightning-formatted-text>
                                <br />
                            </div>
                            <span
                                class="slds-form-element__label lightning-output-field__label"
                                >Tema</span
                            >
                            <br />
                            <lightning-formatted-text
                                value={record.Subject__c}
                                class="lightning-output-field"
                            >
                            </lightning-formatted-text>
                            <span
                                class="slds-form-element__label lightning-output-field__label"
                                >Tilleggsinformasjon</span
                            >
                            <br />
                            <lightning-formatted-text
                                value={record.Description__c}
                                class="lightning-output-field"
                            >
                            </lightning-formatted-text>
                            <br />
                            <span
                                class="slds-form-element__label lightning-output-field__label"
                                >Status</span
                            >
                            <br />
                            <lightning-formatted-text
                                value={record.ExternalRequestStatus__c}
                                class="lightning-output-field"
                            >
                            </lightning-formatted-text>
                        </div>
                        <div class="slds-col slds-size_1-of-2">
                            <span
                                class="slds-form-element__label lightning-output-field__label"
                                >Oppmøteadresse</span
                            >
                            <br />
                            <lightning-formatted-text
                                value={record.MeetingStreet__c}
                                class="lightning-output-field"
                            >
                            </lightning-formatted-text>
                            <br />
                            <span
                                class="slds-form-element__label lightning-output-field__label"
                                >Postnummer</span
                            >
                            <br />
                            <lightning-formatted-text
                                value={record.MeetingPostalCode__c}
                                class="lightning-output-field"
                            >
                            </lightning-formatted-text>
                            <br />
                            <span
                                class="slds-form-element__label lightning-output-field__label"
                                >Poststed</span
                            >
                            <br />
                            <lightning-formatted-text
                                value={record.MeetingPostalCity__c}
                                class="lightning-output-field"
                            >
                            </lightning-formatted-text>
                            <br />
                            <br />
                            <span
                                class="slds-form-element__label lightning-output-field__label"
                                >Tolkeadresse</span
                            >
                            <br />
                            <lightning-formatted-text
                                value={record.InterpretationStreet__c}
                                class="lightning-output-field"
                            >
                            </lightning-formatted-text>
                            <br />
                            <span
                                class="slds-form-element__label lightning-output-field__label"
                                >Postnummer</span
                            >
                            <br />
                            <lightning-formatted-text
                                value={record.InterpretationPostalCode__c}
                                class="lightning-output-field"
                            >
                            </lightning-formatted-text>
                            <br />
                            <span
                                class="slds-form-element__label lightning-output-field__label"
                                >Poststed</span
                            >
                            <br />
                            <lightning-formatted-text
                                value={record.InterpretationPostalCity__c}
                                class="lightning-output-field"
                            >
                            </lightning-formatted-text>
                        </div>
                    </div>
                </section>
            </div>

            <button
                class="lukknapp lukknapp--overstHjorne modal__lukkknapp--shake"
                onclick={abortShowDetails}
            >
                <span class="text-hide">Lukk</span>
            </button>
        </div>
    </div>
</template>
