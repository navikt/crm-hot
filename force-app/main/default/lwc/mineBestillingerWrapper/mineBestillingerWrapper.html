<template>
    <div class="brodsmulesti">
        <c-breadcrumbs url-list={breadcrumbs} class="skjema-max-width"></c-breadcrumbs>
    </div>
    <main class="mainContent">
        <div if:true={isList} class="mine-bestillinger-wrapper">
            <div class="navigation-container">
                <a class="back-link" href="/s/"
                    ><c-icon icon="Back"></c-icon>
                    <p style="margin-left: 0.25rem">Tilbake</p></a
                >
                <h2 class="header">Mine bestillinger</h2>
                <c-list-filters-button
                    header="Filtrer søket"
                    filters={filters}
                    onapplyfilter={applyFilter}
                    ongetfilteredrecordslength={sendFilteredRecordsLength}
                ></c-list-filters-button>
            </div>
            <br />
            <c-table
                records={records}
                columns={columns}
                onrowclick={goToRecordDetails}
                icon-by-value={iconByValue}
            ></c-table>
        </div>
        <div if:true={isRequestDetails} class="mine-bestillinger-wrapper">
            <div class="navigation-container">
                <a class="back-link" onclick={goBack}
                    ><c-icon icon="Back"></c-icon>
                    <p style="margin-left: 0.25rem">Tilbake</p></a
                >
                <h2 class="header">Serie: <span>{request.Subject__c}</span></h2>
                <c-list-filters-button
                    header="Filtrer søket"
                    filters={filters}
                    onapplyfilter={applyFilter}
                    ongetfilteredrecordslength={sendFilteredRecordsLength}
                ></c-list-filters-button>
            </div>
            <div class="record-details-container">
                <p>Gjelder fra: <span>{requestSeriesStartDate} - {requestSeriesEndDate}</span></p>
                <p>Adresse: <span>{requestAddressToShow}</span></p>
                <br />
                <p>Bestiller: <span>{request.Orderer__r.Name}</span></p>
            </div>
            <br />
            <div class="buttonRow">
                <c-button
                    button-label={editButtonLabel}
                    button-styling="primary"
                    style="padding-right: 1vw; padding-bottom: 1vw"
                    desktop-style="width: 8rem; justify-content: center"
                    mobile-style="width: 8rem; justify-content: center"
                    onbuttonclick={editOrder}
                    disabled={isRequestEditButtonDisabled}
                ></c-button>
                <c-button
                    button-label={copyButtonLabel}
                    button-styling="secondary"
                    style="padding-right: 1vw; padding-bottom: 1vw"
                    desktop-style="width: 8rem; justify-content: center"
                    mobile-style="width: 8rem; justify-content: center"
                    onbuttonclick={cloneOrder}
                ></c-button>
                <c-button
                    button-label={cancelButtonLabel}
                    button-styling="secondary"
                    style="padding-right: 1vw; padding-bottom: 1vw"
                    desktop-style="width: 8rem; justify-content: center"
                    mobile-style="width: 8rem; justify-content: center"
                    onbuttonclick={cancelOrder}
                    disabled={isRequestCancelButtonDisabled}
                ></c-button>
                <c-button
                    button-label="Legg til filer"
                    button-styling="primary"
                    style="padding-right: 1vw; padding-bottom: 1vw"
                    desktop-style="width: 8rem; justify-content: center"
                    mobile-style="width: 8rem; justify-content: center"
                    onbuttonclick={addFiles}
                    disabled={isRequestAddFilesButtonDisabled}
                ></c-button>
            </div>
            <div class="record-details-container">
                <c-table
                    records={workOrdersToShow}
                    columns={workOrderColumns}
                    onrowclick={goToRecordDetails}
                    icon-by-value={iconByValue}
                ></c-table>
            </div>
        </div>
        <div if:true={isWorkOrderDetails} class="mine-bestillinger-wrapper">
            <div class="navigation-container">
                <a class="back-link" onclick={goBack}
                    ><c-icon icon="Back"></c-icon>
                    <p style="margin-left: 0.25rem">Tilbake</p></a
                >
                <h2 class="header" style="text-align: center">{workOrder.Subject}</h2>
                <c-list-filters-button
                    style="visibility: hidden"
                    aria-hidden="true"
                    header="Filtrer søket"
                    filters={filters}
                    onapplyfilter={applyFilter}
                    ongetfilteredrecordslength={sendFilteredRecordsLength}
                ></c-list-filters-button>
            </div>
            <div class="record-details-container">
                <p>Fra dato: <span>{workOrderStartDate}</span></p>
                <p>Til dato: <span>{workOrderEndDate}</span></p>
                <br />
                <p>Adresse: <span>{workOrder.HOT_AddressFormated__c}</span></p>
                <br />
                <p>Status: <span>{workOrder.HOT_ExternalWorkOrderStatus__c}</span></p>
                <br />
                <p>Bestillingsnummer: <span>{workOrder.HOT_RequestName__c}</span></p>
                <p>Bestiller: <span>{request.Orderer__r.Name}</span></p>
                <br if:true={workOrder.HOT_Interpreters__c} />
                <p if:true={workOrder.HOT_Interpreters__c}>
                    {interpreter}: <span>{workOrder.HOT_Interpreters__c}</span>
                </p>
            </div>
            <c-record-files-with-sharing
                record-id={request.Id}
                is-get-all={isGetAllFiles}
                is-delete-option="true"
                title="Tidligere opplastede vedlegg"
                delete-file-on-button-click="true"
            ></c-record-files-with-sharing>
            <br />
            <div class="buttonRow">
                <c-button
                    button-label={editButtonLabel}
                    button-styling="primary"
                    style="padding-right: 1vw; padding-bottom: 1vw"
                    desktop-style="width: 8rem; justify-content: center"
                    mobile-style="width: 8rem; justify-content: center"
                    onbuttonclick={editOrder}
                    disabled={isWOEditButtonDisabled}
                ></c-button>
                <c-button
                    button-label={copyButtonLabel}
                    button-styling="secondary"
                    style="padding-right: 1vw; padding-bottom: 1vw"
                    desktop-style="width: 8rem; justify-content: center"
                    mobile-style="width: 8rem; justify-content: center"
                    onbuttonclick={cloneOrder}
                ></c-button>
                <c-button
                    button-label={cancelButtonLabel}
                    button-styling="secondary"
                    style="padding-right: 1vw; padding-bottom: 1vw"
                    desktop-style="width: 8rem; justify-content: center"
                    mobile-style="width: 8rem; justify-content: center"
                    onbuttonclick={cancelOrder}
                    disabled={isWOCancelButtonDisabled}
                ></c-button>
                <c-button
                    button-label="Legg til filer"
                    button-styling="primary"
                    style="padding-right: 1vw; padding-bottom: 1vw"
                    desktop-style="width: 8rem; justify-content: center"
                    mobile-style="width: 8rem; justify-content: center"
                    onbuttonclick={addFiles}
                    disabled={isWOAddFilesButtonDisabled}
                ></c-button>
            </div>
        </div>
    </main>
    <c-alertdialog
        header={modalHeader}
        content={modalContent}
        desktop-style="text-align: center; white-space: pre-line; width: 50%"
        mobile-style="text-align: center; white-space: pre-line; width: 100%"
        center-buttons="true"
        no-cancel-button={noCancelButton}
        onbuttonclick={handleAlertDialogClick}
        disabled={buttonDisabled}
    >
    </c-alertdialog>

    <div
        class="ReactModal__Overlay ReactModal__Overlay--after-open modal__overlay hidden"
        style="z-index: 9999; background-color: rgba(38, 38, 38, 0.7)"
        tabindex="-1"
    >
        <div
            class="ReactModal__Content ReactModal__Content--after-open comments-dialog-container"
            role="dialog"
            aria-labelledby="details-header-id"
        >
            <div class="loader hidden"></div>
            <div if:true={showUploadFilesComponent}>
                <h2 style="font-size: 1.25rem; text-align: center">Legg til filer i bestillingen</h2>
                <br />
                <c-upload-files
                    record-id={recordId}
                    onfiledatalength={checkFileDataLength}
                    onuploadcomplete={onUploadComplete}
                    onuploaderror={onUploadError}
                    ongetcheckboxvalue={getCheckboxValue}
                    checkbox-validation="true"
                    checkbox-text-plural="Dokumentene som er lagt ved gir mer informasjon om denne bestillingen. Jeg er klar over at dokumentene vil bli delt med tolken(e) jeg får."
                    checkbox-text-single="Dokumentet som er lagt ved gir mer informasjon om denne bestillingen. Jeg er klar over at dokumentet vil bli delt med tolken(e) jeg får."
                    validation-message="For å legge til dokumenter må du gi samtykke til at formidler og tolk kan se dokumentene som lastes opp"
                ></c-upload-files>
            </div>
            <br />
            <br />
            <div style="text-align: center" aria-live="polite">
                <c-button
                    if:true={hasFiles}
                    button-styling="primary"
                    button-label="Lagre"
                    onbuttonclick={uploadFilesOnSave}
                    style="padding-right: 1vw"
                    desktop-style="width: 8rem; justify-content: center"
                    mobile-style="width: 8rem; justify-content: center"
                ></c-button>
                <c-button
                    if:true={showCancelUploadButton}
                    button-styling="secondary"
                    button-label="Avbryt"
                    onbuttonclick={cancelUploadFiles}
                    desktop-style="width: 8rem; justify-content: center"
                    mobile-style="width: 8rem; justify-content: center"
                ></c-button>
            </div>
        </div>
    </div>
</template>
