<template>
    <div class="brodsmulesti">
        <lightning-breadcrumbs class="skjema-max-width">
            <lightning-breadcrumb label="Tolketjenesten" href="/s/"> </lightning-breadcrumb>
            <lightning-breadcrumb label="Ny bestilling" href="/s/ny-bestilling"> </lightning-breadcrumb>
        </lightning-breadcrumbs>
    </div>

    <div class="main-content submitted-false">
        <div class="skjema-ikon tolketjenesten">
            <img class="skjema-ikon-img" src="/s/sfsites/c/resource/1585817547000/SkjemaIkon" alt="" />
        </div>
        <div class="skjema skjema-max-width">
            <lightning-record-edit-form
                object-api-name="HOT_Request__c"
                density="comfy"
                onsuccess={handleSuccess}
                onerror={handleError}
                onsubmit={handleSubmit}
                record-id={recordId}
            >
                <c-hot_request-form_type
                    if:true={showNextButton}
                    onrequestformtyperesult={handleRequestType}
                ></c-hot_request-form_type>
                <div if:false={showNextButton} class="actual-form">
                    <c-hot_request-form_user
                        class="subform"
                        if:true={requestTypeResult.userForm}
                    ></c-hot_request-form_user>
                    <c-hot_request-form_orderer
                        class="subform"
                        if:true={requestTypeResult.ordererForm}
                    ></c-hot_request-form_orderer>
                    <c-hot_request-form_company
                        class="subform"
                        if:true={requestTypeResult.companyForm}
                    ></c-hot_request-form_company>
                    <c-hot_request-form_request
                        class="subform"
                        if:true={requestTypeResult.requestForm}
                    ></c-hot_request-form_request>

                    <div class="button-container">
                        <div style="display: flex; justify-content: center">
                            <div if:true={spin} class="loader"></div>
                        </div>
                        <div if:false={spin}>
                            <lightning-button
                                title="Send inn bestilling"
                                class="slds-m-left_x-small"
                                type="submit"
                                variant="brand"
                                label="SEND INN"
                            >
                            </lightning-button>
                            <br />
                            <lightning-button
                                title="Avbryt"
                                variant="base"
                                label="Avbryt"
                                onclick={goToPrevousPage}
                                class="slds-m-left_x-small back-button"
                            >
                            </lightning-button>
                        </div>
                    </div>
                </div>
            </lightning-record-edit-form>
        </div>
    </div>

    <div class="main-content hidden submitted-true">
        <div class="main-content dialog-boks skjema-max-width">
            <lightning-icon
                icon-name="utility:success"
                alternative-text="Suksess"
                title="Suksess"
                variant="success"
                size="large"
            >
            </lightning-icon>
            <br />
            <h2 class="typo-undertittel h2-successMessage" id="successMessage" tabindex="-1">Bestilling mottatt</h2>
            <br />
            <lightning-button title="GÃ¥ til mine bestillinger" variant="brand" label="OK" onclick={goToMyRequests}>
            </lightning-button>
        </div>
    </div>

    <c-alertdialog
        header="Noe gikk galt"
        content={modalContent}
        desktop-style="text-align: center;"
        center-buttons="true"
        onbuttonclick={handleClick}
        no-cancel-button="true"
        max-width="fit-content"
        max-height="fit-content"
    >
    </c-alertdialog>
</template>
