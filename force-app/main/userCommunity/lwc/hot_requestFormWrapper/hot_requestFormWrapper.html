<template>
    <div class="brodsmulesti">
        <lightning-breadcrumbs aria-label="Breadcrumbs" class="skjema-max-width">
            <lightning-breadcrumb label="Tolketjenesten" href="/s/"> </lightning-breadcrumb>
            <lightning-breadcrumb label="Ny bestilling" href="/s/ny-bestilling"> </lightning-breadcrumb>
        </lightning-breadcrumbs>
    </div>

    <div class="main-content submitted-false">
        <div class="skjema-ikon tolketjenesten">
            <img class="skjema-ikon-img" src="/s/sfsites/c/resource/1585817547000/SkjemaIkon" alt="" />
        </div>
        <div class="skjema skjema-max-width">
            <lightning-record-edit-form
                object-api-name="HOT_Request__c"
                density="comfy"
                onsuccess={handleSuccess}
                onerror={handleError}
                onsubmit={handleSubmit}
                record-id={recordId}
            >
                <c-hot_request-form_type
                    if:false={requestTypeChosen}
                    onrequestformtyperesult={handleRequestType}
                    previous-page={previousPage}
                ></c-hot_request-form_type>
                <div if:true={requestTypeChosen} class="actual-form">
                    <c-hot_request-form_orderer
                        parent-field-values={fieldValues}
                        class="subform"
                        if:true={requestTypeResult.ordererForm}
                    ></c-hot_request-form_orderer>
                    <c-hot_request-form_company
                        parent-field-values={fieldValues}
                        parent-company-component-values={componentValues}
                        class="subform"
                        onusercheckboxclicked={handleUserCheckbox}
                        if:true={requestTypeResult.companyForm}
                        is-edit-mode={isEditMode}
                    ></c-hot_request-form_company>
                    <c-hot_request-form_user
                        parent-field-values={fieldValues}
                        class="subform"
                        if:true={requestTypeResult.userForm}
                        is-edit-mode={isEditMode}
                    ></c-hot_request-form_user>
                    <c-hot_request-form_request
                        parent-field-values={fieldValues}
                        parent-request-component-values={componentValues}
                        is-get-all={isGetAll}
                        request-ids={requestIds}
                        record-id={recordId}
                        class="subform"
                        if:true={requestTypeResult.requestForm}
                        is-request-type-me={isTypeMe}
                    ></c-hot_request-form_request>
                    <div class="button-container">
                        <div if:true={spin} class="loader" style="display: flex; justify-content: center"></div>
                        <div if:false={spin} style="display: flex; justify-content: center; flex-direction: column">
                            <c-button
                                if:true={requestTypeResult.requestForm}
                                button-label="Send inn"
                                name="Send inn bestilling"
                                button-styling="primary"
                                type="submit"
                                style="padding-bottom: 1em"
                                desktop-style="width: 8vw; justify-content: center"
                                mobile-style="width: 8vw; justify-content: center"
                            ></c-button>
                            <c-button
                                if:false={requestTypeResult.requestForm}
                                button-label="Neste"
                                button-styling="primary"
                                onbuttonclick={handleNextButtonClicked}
                                style="padding-bottom: 1em"
                                desktop-style="width: 8vw; justify-content: center"
                                mobile-style="width: 8vw; justify-content: center"
                            ></c-button>
                            <c-button
                                if:false={isEditModeAndTypeMe}
                                button-label="Forrige"
                                button-styling="secondary"
                                onbuttonclick={handleBackButtonClicked}
                                style="padding-bottom: 1em"
                                desktop-style="width: 8vw; justify-content: center"
                                mobile-style="width: 8vw; justify-content: center"
                            ></c-button>
                            <c-button
                                if:true={requestTypeResult.requestForm}
                                button-label="Avbryt"
                                button-styling="tertiary"
                                onbuttonclick={goToPreviousPage}
                                desktop-style="width: 8vw; justify-content: center"
                                mobile-style="width: 8vw; justify-content: center"
                            ></c-button>
                        </div>
                    </div>
                </div>
            </lightning-record-edit-form>
        </div>
    </div>

    <div class="main-content hidden submitted-true">
        <div class="main-content dialog-boks skjema-max-width">
            <lightning-icon
                icon-name="utility:success"
                alternative-text="Suksess"
                title="Suksess"
                variant="success"
                size="large"
            >
            </lightning-icon>
            <br />
            <h2
                class="typo-undertittel h2-successMessage"
                id="successMessage"
                tabindex="-1"
                role="alert"
                aria-live="assertive"
            >
                Bestilling mottatt
            </h2>
            <br />
            <lightning-button title="GÃ¥ til mine bestillinger" variant="brand" label="OK" onclick={goToMyRequests}>
            </lightning-button>
        </div>
    </div>
    <c-alertdialog
        header={modalHeader}
        content={modalContent}
        desktop-style="text-align: center; white-space: pre-line;"
        mobile-style="text-align: center; white-space: pre-line;"
        center-buttons="true"
        no-cancel-button={noCancelButton}
        onbuttonclick={handleAlertDialogClick}
    >
    </c-alertdialog>
</template>
