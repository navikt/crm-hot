<template>
    <div style="margin-bottom: 0.5rem">
        <div class="time-inputs-container" style="margin-bottom: 0.5rem" aria-live>
            <template iterator:it={times}>
                <div class="dynamic-time-inputs-with-line_button" key={it.value.id}>
                    <div class="dynamic-time-inputs" aria-live style="align-items: center; padding-bottom: 1vw">
                        <lightning-input
                            label="Dato (dd.mm.åååå)"
                            type="date"
                            class="tolk-skjema-input date"
                            date-style="short"
                            onchange={setDate}
                            name={it.value.id}
                            value={it.value.date}
                            required
                        >
                        </lightning-input>
                        <div class="dynamic-time-inputs__times">
                            <c-input
                                label="Fra (tt:mm)"
                                type="time"
                                value={it.value.startTime}
                                error-text="Feltet må fylles ut."
                                name={it.value.id}
                                data-id="starttime"
                                ongetvalueonchange={setStartTime}
                                desktop-style="max-width: 10vw"
                            ></c-input>
                            <c-input
                                label="Til (tt:mm)"
                                type="time"
                                value={it.value.endTime}
                                error-text="Feltet må fylles ut."
                                name={it.value.id}
                                data-id="endtime"
                                ongetvalueonchange={setEndTime}
                                desktop-style="max-width: 10vw"
                            ></c-input>
                        </div>
                    </div>
                    <lightning-button
                        if:false={isOnlyOneTime}
                        variant="base"
                        icon-name="utility:close"
                        class="remove-time__button"
                        onclick={removeTime}
                        name={it.value.id}
                        aria-label="Fjern tid"
                    >
                    </lightning-button>
                </div>
            </template>
        </div>
        <c-checkbox
            label="Gjentagende"
            oncheckboxclick={advancedTimes}
            class="filter-list-checkbox"
            name="Gjentagende"
        ></c-checkbox>
        <div if:true={isAdvancedTimes} class="time-inputs-container" style="margin-bottom: 0.5rem" aria-live>
            <c-picklist
                name="Gjenta"
                choices={repeatingOptions}
                onpicklistvaluechange={handleRepeatChoiceMade}
                class="tolk-skjema-input recurringType"
                master-label="Gjenta"
                desktop-style="width: 30%"
                mobile-style="width: 100%"
            >
            </c-picklist>
            <div if:true={showWeekDays} aria-live>
                <lightning-checkbox-group
                    label="Ukedager"
                    name="Days"
                    options={days}
                    value={chosenDays}
                    class="recurringDays"
                    onchange={handleDayChosen}
                >
                </lightning-checkbox-group>
            </div>
            <div aria-live if:true={isRepeating}>
                <lightning-input
                    label="Slutt dato"
                    type="date"
                    name="recurring End Date"
                    class="tolk-skjema-input third-width recurringEndDate"
                    date-style="short"
                    value={repeatingEndDate}
                    onchange={setRepeatingEndDateDate}
                    required
                >
                </lightning-input>
            </div>
        </div>

        <lightning-button
            if:false={isAdvancedTimes}
            label="Legg til flere tider"
            icon-name="utility:add"
            class="add-times"
            onclick={addTime}
        >
        </lightning-button>
    </div>
</template>
