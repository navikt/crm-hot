<template>
    <div style="margin-bottom: 0.5rem">
        <template iterator:it={times}>
            <div key={it.value.id} class="listClass">
                <!--TODO: Make this the same width as sluttdato field-->
                <c-input
                    label="Dato (dd.mm.åååå)"
                    type="date"
                    date-style="short"
                    ongetvalueonchange={setDate}
                    name={it.value.id}
                    value={it.value.date}
                    error-text="Feltet må fylles ut."
                    mobile-style="padding-bottom: 1vw"
                ></c-input>
                <c-input
                    label="Fra (tt:mm)"
                    type="time"
                    value={it.value.startTime}
                    error-text="Feltet må fylles ut."
                    name={it.value.id}
                    data-id="starttime"
                    ongetvalueonchange={setStartTime}
                    desktop-style="padding-left: 2vw"
                    mobile-style="padding-bottom: 1vw"
                ></c-input>
                <c-input
                    label="Til (tt:mm)"
                    type="time"
                    value={it.value.endTime}
                    error-text="Feltet må fylles ut."
                    name={it.value.id}
                    data-id="endtime"
                    ongetvalueonchange={setEndTime}
                    desktop-style="padding-left: 1vw"
                ></c-input>
                <br if:false={isOnlyOneTime} />
                <div style="padding-top: 4.5%; padding-left: 2vw">
                    <c-button
                        if:false={isOnlyOneTime}
                        type="button"
                        button-styling="danger"
                        onbuttonclick={removeTime}
                        aria-label="Fjern tid"
                        name={it.value.id}
                        button-label="Slett"
                    >
                    </c-button>
                </div>
                <br if:false={isOnlyOneTime} />
            </div>
        </template>

        <c-checkbox label="Gjentagende" oncheckboxclick={advancedTimes} name="Gjentagende"></c-checkbox>
        <div if:true={isAdvancedTimes} class="time-inputs-container" style="margin-bottom: 0.5rem" aria-live>
            <c-picklist
                name="Gjenta"
                choices={repeatingOptions}
                onpicklistvaluechange={handleRepeatChoiceMade}
                master-label="Gjenta"
                desktop-style="width: 30%"
                mobile-style="width: 100%"
            >
            </c-picklist>
            <br />
            <div if:true={showWeekDays} aria-live>
                <c-checkboxgroup
                    checkboxes={days}
                    oncheckboxgroupclick={handleDayChosen}
                    header="Ukedager"
                ></c-checkboxgroup>
            </div>
            <div aria-live if:true={isRepeating}>
                <c-input
                    label="Sluttdato"
                    type="date"
                    date-style="short"
                    ongetvalueonchange={setRepeatingEndDateDate}
                    name="recurring End Date"
                    value={repeatingEndDate}
                    error-text="Feltet må fylles ut."
                    desktop-style="width: 30%"
                ></c-input>
            </div>
        </div>
        <c-button
            if:false={isAdvancedTimes}
            type="button"
            button-styling="secondary"
            onbuttonclick={addTime}
            aria-label="Legg til flere tider"
            button-label="+ Legg til flere tider"
        >
        </c-button>
    </div>
</template>
