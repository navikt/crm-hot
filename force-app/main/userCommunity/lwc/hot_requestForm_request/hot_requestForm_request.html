<template>
    <section if:true={requestForm} class="bestilling-info-skjema">
        <h2 style="font-size: 1.25rem">Informasjon om behov for tolk</h2>
        <lightning-input-field
            class="tolk-skjema-input"
            field-name="Subject__c"
            value={fieldValues.Subject__c}
            title="Hva trenger du tolk til?"
            required
        >
        </lightning-input-field>
        <br />

        <div style="margin-bottom: 0.5rem">
            <div class="time-inputs-container" style="margin-bottom: 0.5rem" aria-live>
                <template iterator:it={times}>
                    <div class="dynamic-time-inputs-with-line_button" key={it.value.id}>
                        <div class="dynamic-time-inputs" aria-live>
                            <lightning-input
                                label="Dato (dd.mm.åååå)"
                                type="date"
                                class="tolk-skjema-input date"
                                date-style="short"
                                onchange={setDate}
                                name={it.value.id}
                                value={it.value.date}
                                required
                            >
                            </lightning-input>
                            <div class="dynamic-time-inputs__times">
                                <lightning-input
                                    label="Fra (tt:mm)"
                                    type="time"
                                    class="tolk-skjema-input start-tid"
                                    onchange={setStartTime}
                                    name={it.value.id}
                                    value={it.value.startTime}
                                    required
                                >
                                </lightning-input>
                                <lightning-input
                                    label="Til (tt:mm)"
                                    type="time"
                                    class="tolk-skjema-input slutt-tid"
                                    onchange={setEndTime}
                                    name={it.value.id}
                                    value={it.value.endTime}
                                    required
                                >
                                </lightning-input>
                            </div>
                        </div>
                        <lightning-button
                            if:false={isOnlyOneTime}
                            variant="base"
                            icon-name="utility:close"
                            class="remove-time__button"
                            onclick={removeTime}
                            name={it.value.id}
                            aria-label="Fjern tid"
                        >
                        </lightning-button>
                    </div>
                </template>
            </div>

            <lightning-input
                if:false={isEditMode}
                type="checkbox"
                class="filter-list-checkbox"
                label="Gjentagende"
                name="Gjentagende"
                onchange={advancedTimes}
            >
            </lightning-input>

            <div if:true={isAdvancedTimes} class="time-inputs-container" style="margin-bottom: 0.5rem" aria-live>
                <lightning-combobox
                    name="Gjenta"
                    variant="label-hidden"
                    options={repeatingOptions}
                    value={repeatingOptionChosen}
                    onchange={handleRepeatChoiceMade}
                    class="tolk-skjema-input third-width recurringType"
                    label="Gjenta"
                >
                </lightning-combobox>
                <div if:true={showWeekDays} aria-live>
                    <lightning-checkbox-group
                        label="Ukedager"
                        name="Days"
                        options={days}
                        value={chosenDays}
                        class="recurringDays"
                        onchange={handleDayChosen}
                    >
                    </lightning-checkbox-group>
                </div>
                <div aria-live if:true={isRepeating}>
                    <lightning-input
                        label="Slutt dato"
                        type="date"
                        name="recurring End Date"
                        class="tolk-skjema-input third-width recurringEndDate"
                        date-style="short"
                        value={repeatingEndDate}
                        onchange={setRepeatingEndDateDate}
                        required
                    >
                    </lightning-input>
                </div>
            </div>

            <lightning-button
                if:false={isAdvancedTimes}
                label="Legg til flere tider"
                icon-name="utility:add"
                class="add-times"
                onclick={addTime}
            >
            </lightning-button>
        </div>

        <br />
        <lightning-input-field
            class="tolk-skjema-input adressefelt-hjelp"
            field-name="MeetingStreet__c"
            value={fieldValues.MeetingStreet__c}
            required
        >
        </lightning-input-field>
        <div class="slds-grid slds-gutters">
            <div class="slds-col slds-size_2-of-5">
                <lightning-input-field
                    class="tolk-skjema-input postnummer"
                    title="Postnummer"
                    field-name="MeetingPostalCode__c"
                    value={fieldValues.MeetingPostalCode__c}
                >
                </lightning-input-field>
            </div>
            <div class="slds-col slds-size_3-of-5">
                <lightning-input-field
                    class="tolk-skjema-input"
                    title="Poststed"
                    field-name="MeetingPostalCity__c"
                    value={fieldValues.MeetingPostalCity__c}
                >
                </lightning-input-field>
            </div>
        </div>
        <br />

        <lightning-radio-group
            class="nav-radio-button-group horizontal radio-button-group_yes-no"
            name="radioGroup"
            label="Er oppmøteadresse det samme som tolkeadresse?"
            options={options}
            value={value}
            type="radio"
            onchange={toggled}
        ></lightning-radio-group>

        <div if:false={sameLocation}>
            <lightning-input-field
                class="tolk-skjema-input adressefelt-hjelp"
                title="Tolkeaddresse"
                field-name="InterpretationStreet__c"
                value={fieldValues.InterpretationStreet__c}
            >
            </lightning-input-field>
            <div class="slds-grid slds-gutters">
                <div class="slds-col slds-size_2-of-5">
                    <lightning-input-field
                        class="tolk-skjema-input postnummer"
                        title="Postnummer"
                        field-name="InterpretationPostalCode__c"
                        value={fieldValues.InterpretationPostalCode__c}
                    >
                    </lightning-input-field>
                </div>
                <div class="slds-col slds-size_3-of-5">
                    <lightning-input-field
                        class="tolk-skjema-input"
                        title="Poststed"
                        field-name="InterpretationPostalCity__c"
                        value={fieldValues.InterpretationPostalCity__c}
                    >
                    </lightning-input-field>
                </div>
            </div>
        </div>
        <br />
        <lightning-input-field
            class="tolk-skjema-input ikke-sensitiv-fritekst"
            title="Tilleggsopplysninger"
            field-name="Description__c"
            value={fieldValues.Description__c}
        >
        </lightning-input-field>
        <div style="margin-left: none">
            <c-upload-files
                record-id={recordId}
                onfiledatalength={checkFileDataLength}
                ongetcheckboxvalue={getCheckboxValue}
                desktop-style="margin-left: unset"
            ></c-upload-files>
        </div>

        <br />
        <c-record-files-with-sharing
            record-id={recordId}
            is-get-all={isGetAll}
            title="Tidligere opplastede vedlegg"
        ></c-record-files-with-sharing>

        <lightning-messages aria-live="assertive"> </lightning-messages>

        <div class="button-container">
            <div style="display: flex; justify-content: center">
                <div if:true={spin} class="loader"></div>
            </div>
            <div if:false={spin}>
                <lightning-button
                    title="Send inn bestilling"
                    class="slds-m-left_x-small"
                    type="submit"
                    variant="brand"
                    label="SEND INN"
                >
                </lightning-button>
                <br />
                <lightning-button
                    title="Avbryt"
                    variant="base"
                    label="Avbryt"
                    onclick={goToPrevousPage}
                    class="slds-m-left_x-small back-button"
                >
                </lightning-button>
            </div>
        </div>
    </section>
</template>
